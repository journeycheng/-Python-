## 线程与进程

### 1.通俗解释

计算机的核心是CPU，它承担了所有的计算任务。任一时刻，单个CPU总是运行一个进程，其他进程处于非运行状态。

- 一个车间看成是一个进程。
- 一个车间里，可以有很多工人，线程就好比是车间里的工人。一个进程可以包括多个线程。
- 车间的空间是工人们共享的，比如许多房间是每个工人都可进出的。这象征一个进程空间是共享的，每个线程都可以使用这些共享内存。
- 有些房间最多只能容纳一个人。这代表一个线程使用某些共享内存时，其他线程必须等它结束，才能使用这一块内存。
- **互斥锁**，防止多个线程同时读写某一块内存区域。在门口加一把锁，先到的人锁上门，后面的人看到上锁了就在门口排队，等锁打开再进去。
- **信号量**，允许同时最多运行多个线程。进去的人就取一把钥匙，出来时再把钥匙放回原处。
- **互斥锁是信号量的一种特殊情况**。互斥锁较为简单，且效率高，在必须保证资源独占的情况下，还是采用这种设计。

- 操作系统的设计，可以归结为三点：
  - 以多进程形式，允许多个任务同时运行
  - 以多线程形式，允许单个任务分成不同的部分运行
  - 提供协调机制，一方面防止进程之间和线程之间产生冲突，另一方面允许进程和线程之间共享资源。
